<ng-container *ngIf="jsonData; then object"></ng-container>

<ng-template #object let-object let-parentPath="parentPath">
    <ng-container *ngIf="object | typeof as type">
        {{ type === 'array' ? '&lbrack;' : '&lcub;' }}
        <ng-container *ngFor="let keyValue of object | keyvalue">
            <ng-container
                [ngTemplateOutlet]="keyValuePair"
                [ngTemplateOutletContext]="{
                    keyValue,
                    path: parentPath ? parentPath + '.' + keyValue.key : keyValue.key,
                    class: classesForKeyPairWrapper,
                }"
            ></ng-container>
        </ng-container>
        {{ type === 'array' ? '&rbrack;' : '&rcub;' }}
    </ng-container>
</ng-template>

<ng-template #keyValuePair let-keyValue="keyValue" let-path="path" let-class="class">
    <div [ngClass]="class">
        <div *ngIf="keyValue.value | typeof as type">
            <span class="json-checkbox-container">
                <mat-checkbox
                    *ngIf="type !== 'array' && type !== 'object'"
                    (change)="
                        checkboxValueChange({ path, key: keyValue.key, value: keyValue.value, checked: $event.checked })
                    "
                    [ngClass]="classesForCheckbox"
                >
                </mat-checkbox>
                <span [ngClass]="classesForKey">{{ keyValue.key }}</span>
            </span>
            :
            <ng-container *ngIf="type === 'array' || type === 'object'; else value">
                <ng-container
                    [ngTemplateOutlet]="object"
                    [ngTemplateOutletContext]="{ $implicit: keyValue.value, parentPath: path }"
                ></ng-container>
                ,
            </ng-container>
        </div>
        <ng-template #value>
            <span [ngClass]="classesForValue"> {{ keyValue.value }} , </span>
        </ng-template>
    </div>
</ng-template>
